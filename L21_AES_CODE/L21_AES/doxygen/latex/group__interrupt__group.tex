\hypertarget{group__interrupt__group}{}\section{Global interrupt management}
\label{group__interrupt__group}\index{Global interrupt management@{Global interrupt management}}
\subsection*{Modules}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__interrupt__deprecated__group}{Deprecated interrupt definitions}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__interrupt__group_ga2b5f1a58b98aea52fbe094636054d910}{}void {\bfseries cpu\+\_\+irq\+\_\+enter\+\_\+critical} (void)\label{group__interrupt__group_ga2b5f1a58b98aea52fbe094636054d910}

\item 
\hypertarget{group__interrupt__group_gad9a7e953e4e3eb6bde58eb1c81092b43}{}void {\bfseries cpu\+\_\+irq\+\_\+leave\+\_\+critical} (void)\label{group__interrupt__group_gad9a7e953e4e3eb6bde58eb1c81092b43}

\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__interrupt__group_ga18a272af1cdb2009183461e1647f4e86}{}volatile bool {\bfseries g\+\_\+interrupt\+\_\+enabled}\label{group__interrupt__group_ga18a272af1cdb2009183461e1647f4e86}

\end{DoxyCompactItemize}
\subsection*{Interrupt Service Routine definition}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group__interrupt__group_ga0da0a19156773eca7070722f26ff66a6}{I\+S\+R}(func)~void func (void)
\begin{DoxyCompactList}\small\item\em Define service routine. \end{DoxyCompactList}\item 
\#define \hyperlink{group__interrupt__group_ga931b667f6490ad3d8905fa25bebb24b1}{irq\+\_\+initialize\+\_\+vectors}()
\begin{DoxyCompactList}\small\item\em Initialize interrupt vectors. \end{DoxyCompactList}\item 
\#define \hyperlink{group__interrupt__group_gaa746642b1132af054826fb169f541965}{irq\+\_\+register\+\_\+handler}(int\+\_\+num,  int\+\_\+prio)
\begin{DoxyCompactList}\small\item\em Register handler for interrupt. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Global interrupt flags}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__interrupt__group_ga9aa1f52defc97531b6343233abeea613}{}typedef uint32\+\_\+t \hyperlink{group__interrupt__group_ga9aa1f52defc97531b6343233abeea613}{irqflags\+\_\+t}\label{group__interrupt__group_ga9aa1f52defc97531b6343233abeea613}

\begin{DoxyCompactList}\small\item\em Type used for holding state of interrupt flag. \end{DoxyCompactList}\item 
\#define \hyperlink{group__interrupt__group_gae4922a4bd8ba4150211fbc7f2302403c}{cpu\+\_\+irq\+\_\+enable}()
\begin{DoxyCompactList}\small\item\em Enable interrupts globally. \end{DoxyCompactList}\item 
\#define \hyperlink{group__interrupt__group_ga7b77391ed86e2e027f9ee1dd99a06980}{cpu\+\_\+irq\+\_\+disable}()
\begin{DoxyCompactList}\small\item\em Disable interrupts globally. \end{DoxyCompactList}\item 
\#define \hyperlink{group__interrupt__group_gae1545a2473614564550b9c4015c94978}{cpu\+\_\+irq\+\_\+is\+\_\+enabled}()~(\+\_\+\+\_\+get\+\_\+\+P\+R\+I\+M\+A\+S\+K() == 0)
\begin{DoxyCompactList}\small\item\em Check if interrupts are globally enabled. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This is a driver for global enabling and disabling of interrupts. 

\subsection{Macro Definition Documentation}
\hypertarget{group__interrupt__group_ga7b77391ed86e2e027f9ee1dd99a06980}{}\index{Global interrupt management@{Global interrupt management}!cpu\+\_\+irq\+\_\+disable@{cpu\+\_\+irq\+\_\+disable}}
\index{cpu\+\_\+irq\+\_\+disable@{cpu\+\_\+irq\+\_\+disable}!Global interrupt management@{Global interrupt management}}
\subsubsection[{cpu\+\_\+irq\+\_\+disable}]{\setlength{\rightskip}{0pt plus 5cm}\#define cpu\+\_\+irq\+\_\+disable(
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{group__interrupt__group_ga7b77391ed86e2e027f9ee1dd99a06980}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                                       \(\backslash\)
        \_\_disable\_irq();                       \(\backslash\)
        \_\_DMB();                               \(\backslash\)
        g\_interrupt\_enabled = \textcolor{keyword}{false};           \(\backslash\)
    \} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Disable interrupts globally. 

\hypertarget{group__interrupt__group_gae4922a4bd8ba4150211fbc7f2302403c}{}\index{Global interrupt management@{Global interrupt management}!cpu\+\_\+irq\+\_\+enable@{cpu\+\_\+irq\+\_\+enable}}
\index{cpu\+\_\+irq\+\_\+enable@{cpu\+\_\+irq\+\_\+enable}!Global interrupt management@{Global interrupt management}}
\subsubsection[{cpu\+\_\+irq\+\_\+enable}]{\setlength{\rightskip}{0pt plus 5cm}\#define cpu\+\_\+irq\+\_\+enable(
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{group__interrupt__group_gae4922a4bd8ba4150211fbc7f2302403c}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                                       \(\backslash\)
        g\_interrupt\_enabled = \textcolor{keyword}{true};            \(\backslash\)
        \_\_DMB();                               \(\backslash\)
        \_\_enable\_irq();                        \(\backslash\)
    \} \textcolor{keywordflow}{while} (0)
\end{DoxyCode}


Enable interrupts globally. 

\hypertarget{group__interrupt__group_gae1545a2473614564550b9c4015c94978}{}\index{Global interrupt management@{Global interrupt management}!cpu\+\_\+irq\+\_\+is\+\_\+enabled@{cpu\+\_\+irq\+\_\+is\+\_\+enabled}}
\index{cpu\+\_\+irq\+\_\+is\+\_\+enabled@{cpu\+\_\+irq\+\_\+is\+\_\+enabled}!Global interrupt management@{Global interrupt management}}
\subsubsection[{cpu\+\_\+irq\+\_\+is\+\_\+enabled}]{\setlength{\rightskip}{0pt plus 5cm}\#define cpu\+\_\+irq\+\_\+is\+\_\+enabled(
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)~(\+\_\+\+\_\+get\+\_\+\+P\+R\+I\+M\+A\+S\+K() == 0)}\label{group__interrupt__group_gae1545a2473614564550b9c4015c94978}


Check if interrupts are globally enabled. 

\begin{DoxyReturn}{Returns}
True if interrupts are enabled. 
\end{DoxyReturn}
\hypertarget{group__interrupt__group_ga931b667f6490ad3d8905fa25bebb24b1}{}\index{Global interrupt management@{Global interrupt management}!irq\+\_\+initialize\+\_\+vectors@{irq\+\_\+initialize\+\_\+vectors}}
\index{irq\+\_\+initialize\+\_\+vectors@{irq\+\_\+initialize\+\_\+vectors}!Global interrupt management@{Global interrupt management}}
\subsubsection[{irq\+\_\+initialize\+\_\+vectors}]{\setlength{\rightskip}{0pt plus 5cm}\#define irq\+\_\+initialize\+\_\+vectors(
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{group__interrupt__group_ga931b667f6490ad3d8905fa25bebb24b1}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{do} \{                             \(\backslash\)
    \} \textcolor{keywordflow}{while}(0)
\end{DoxyCode}


Initialize interrupt vectors. 

For N\+V\+I\+C the interrupt vectors are put in vector table. So nothing to do to initialize them, except defined the vector function with right name.

This must be called prior to \hyperlink{group__interrupt__group_gaa746642b1132af054826fb169f541965}{irq\+\_\+register\+\_\+handler}. \hypertarget{group__interrupt__group_gaa746642b1132af054826fb169f541965}{}\index{Global interrupt management@{Global interrupt management}!irq\+\_\+register\+\_\+handler@{irq\+\_\+register\+\_\+handler}}
\index{irq\+\_\+register\+\_\+handler@{irq\+\_\+register\+\_\+handler}!Global interrupt management@{Global interrupt management}}
\subsubsection[{irq\+\_\+register\+\_\+handler}]{\setlength{\rightskip}{0pt plus 5cm}\#define irq\+\_\+register\+\_\+handler(
\begin{DoxyParamCaption}
\item[{}]{int\+\_\+num, }
\item[{}]{int\+\_\+prio}
\end{DoxyParamCaption}
)}\label{group__interrupt__group_gaa746642b1132af054826fb169f541965}
{\bfseries Value\+:}
\begin{DoxyCode}
\hyperlink{group___c_m_s_i_s___core___n_v_i_c_functions_ga332e10ef9605dc6eb10b9e14511930f8}{NVIC\_ClearPendingIRQ}(    (\hyperlink{group___s_a_m_l21_e18_a__cmsis_gac3af4a32370fb28c4ade8bf2add80251}{IRQn\_Type})int\_num);                      
      \hyperlink{group___c_m_s_i_s___core___n_v_i_c_functions_ga2305cbd44aaad792e3a4e538bdaf14f9}{\(\backslash\)}
\hyperlink{group___c_m_s_i_s___core___n_v_i_c_functions_ga2305cbd44aaad792e3a4e538bdaf14f9}{    NVIC\_SetPriority}(    (\hyperlink{group___s_a_m_l21_e18_a__cmsis_gac3af4a32370fb28c4ade8bf2add80251}{IRQn\_Type})int\_num, int\_prio);                
      \hyperlink{group___c_m_s_i_s___core___n_v_i_c_functions_ga3349f2e3580d7ce22d6530b7294e5921}{\(\backslash\)}
\hyperlink{group___c_m_s_i_s___core___n_v_i_c_functions_ga3349f2e3580d7ce22d6530b7294e5921}{    NVIC\_EnableIRQ}(      (\hyperlink{group___s_a_m_l21_e18_a__cmsis_gac3af4a32370fb28c4ade8bf2add80251}{IRQn\_Type})int\_num);                          \(\backslash\)
\end{DoxyCode}


Register handler for interrupt. 

For N\+V\+I\+C the interrupt vectors are put in vector table. So nothing to do to register them, except defined the vector function with right name.

Usage\+: 
\begin{DoxyCode}
1 irq\_initialize\_vectors();
2 irq\_register\_handler(foo\_irq\_handler);
\end{DoxyCode}


\begin{DoxyNote}{Note}
The function {\itshape func} must be defined with the \hyperlink{group__interrupt__group_ga0da0a19156773eca7070722f26ff66a6}{I\+S\+R} macro. 

The functions prototypes can be found in the device exception header files (exceptions.\+h). 
\end{DoxyNote}
\hypertarget{group__interrupt__group_ga0da0a19156773eca7070722f26ff66a6}{}\index{Global interrupt management@{Global interrupt management}!I\+S\+R@{I\+S\+R}}
\index{I\+S\+R@{I\+S\+R}!Global interrupt management@{Global interrupt management}}
\subsubsection[{I\+S\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+S\+R(
\begin{DoxyParamCaption}
\item[{}]{func}
\end{DoxyParamCaption}
)~void func (void)}\label{group__interrupt__group_ga0da0a19156773eca7070722f26ff66a6}


Define service routine. 

\begin{DoxyNote}{Note}
For N\+V\+I\+C devices the interrupt service routines are predefined to add to vector table in binary generation, so there is no service register at run time. The routine collections are in exceptions.\+h.
\end{DoxyNote}
Usage\+: 
\begin{DoxyCode}
1 ISR(foo\_irq\_handler)
2 \{
3      // Function definition
4      ...
5 \}
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em func} & Name for the function. \\
\hline
\end{DoxyParams}
